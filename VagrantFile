require 'highline/import'

NUM_NODES = 1
NUM_CONTROLLER_NODE = 1
IP_NTW = "192.168.14."
NODE_IP_START = 10

NUM_NODES = ask("Enter quantity VM (1-8): ", Integer) { |q| q.in = 1..8 }

Vagrant.configure("2") do |config|
  config.vm.box = "mydebian-webserver"

  (1..NUM_NODES).each do |i|
    config.vm.define "debian-webserver#{i}" do |node|
      node.vm.provider "virtualbox" do |vb|
          vb.name = "debian-webserver#{i}"
      end

      node.vm.hostname = "webserver#{i}"
      node.vm.network "private_network", ip: IP_NTW + "#{NODE_IP_START + i}"
      node.vm.network "forwarded_port", guest: 80, host: "#{8000 + i}", protocol: "tcp"
    end
  end
end